%% --- UI Initialization code generated by Matlab. ---
function varargout = RISV(varargin)

gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
    'gui_Singleton',  gui_Singleton, ...
    'gui_OpeningFcn', @RISV_OpeningFcn, ...
    'gui_OutputFcn',  @RISV_OpeningFcn, ...
    'gui_LayoutFcn',  @RISV_LayoutFcn, ...
    'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end

%--- Set application data first then calling the CreateFcn. ---
function local_CreateFcn(hObject, eventdata, createfcn, appdata)

if ~isempty(appdata)
    names = fieldnames(appdata);
    for i=1:length(names)
        name = char(names(i));
        setappdata(hObject, name, getfield(appdata,name));
    end
end

if ~isempty(createfcn)
    if isa(createfcn,'function_handle')
        createfcn(hObject, eventdata);
    else
        eval(createfcn);
    end
end

% --- Handles default GUIDE GUI creation and callback dispatch. ---
function varargout = gui_mainfcn(gui_State, varargin)

gui_StateFields =  {'gui_Name'
    'gui_Singleton'
    'gui_OpeningFcn'
    'gui_OutputFcn'
    'gui_LayoutFcn'
    'gui_Callback'};
gui_Mfile = '';
for i=1:length(gui_StateFields)
    if ~isfield(gui_State, gui_StateFields{i})
        error(message('MATLAB:guide:StateFieldNotFound', gui_StateFields{ i }, gui_Mfile));
    elseif isequal(gui_StateFields{i}, 'gui_Name')
        gui_Mfile = [gui_State.(gui_StateFields{i}), '.m'];
    end
end

numargin = length(varargin);

if numargin == 0
    % Create the GUI only if we are not in the process of loading it already
    gui_Create = true;
elseif local_isInvokeActiveXCallback(gui_State, varargin{:})
    vin{1} = gui_State.gui_Name;
    vin{2} = [get(varargin{1}.Peer, 'Tag'), '_', varargin{end}];
    vin{3} = varargin{1};
    vin{4} = varargin{end-1};
    vin{5} = guidata(varargin{1}.Peer);
    feval(vin{:});
    return;
elseif local_isInvokeHGCallback(gui_State, varargin{:})
    % RISV('CALLBACK',hObject,eventData,handles,...)
    gui_Create = false;
else
    % RISV(...)
    % create the GUI and hand varargin to the openingfcn
    gui_Create = true;
end

if ~gui_Create
    % In design time, we need to mark all components possibly created in
    % the coming callback evaluation as non-serializable. This way, they
    % will not be brought into GUIDE and not be saved in the figure file
    % when running/saving the GUI from GUIDE.
    designEval = false;
    if (numargin>1 && ishghandle(varargin{2}))
        fig = varargin{2};
        while ~isempty(fig) && ~ishghandle(fig,'figure')
            fig = get(fig,'parent');
        end
        
        designEval = isappdata(0,'CreatingGUIDEFigure') || (isscalar(fig)&&isprop(fig,'GUIDEFigure'));
    end
    
    if designEval
        beforeChildren = findall(fig);
    end
    
    % evaluate the callback now
    varargin{1} = gui_State.gui_Callback;
    if nargout
        [varargout{1:nargout}] = feval(varargin{:});
    else
        feval(varargin{:});
    end
    
    % Set serializable of objects created in the above callback to off in
    % design time. Need to check whether figure handle is still valid in
    % case the figure is deleted during the callback dispatching.
    if designEval && ishghandle(fig)
        set(setdiff(findall(fig),beforeChildren), 'Serializable','off');
    end
else
    if gui_State.gui_Singleton
        gui_SingletonOpt = 'reuse';
    else
        gui_SingletonOpt = 'new';
    end
    
    % Check user passing 'visible' P/V pair first so that its value can be
    % used by oepnfig to prevent flickering
    gui_Visible = 'auto';
    gui_VisibleInput = '';
    for index=1:2:length(varargin)
        if length(varargin) == index || ~ischar(varargin{index})
            break;
        end
        
        % Recognize 'visible' P/V pair
        len1 = min(length('visible'),length(varargin{index}));
        len2 = min(length('off'),length(varargin{index+1}));
        if ischar(varargin{index+1}) && strncmpi(varargin{index},'visible',len1) && len2 > 1
            if strncmpi(varargin{index+1},'off',len2)
                gui_Visible = 'invisible';
                gui_VisibleInput = 'off';
            elseif strncmpi(varargin{index+1},'on',len2)
                gui_Visible = 'visible';
                gui_VisibleInput = 'on';
            end
        end
    end
    
    % Open fig file with stored settings.  Note: This executes all component
    % specific CreateFunctions with an empty HANDLES structure.
    
    
    % Do feval on layout code in m-file if it exists
    gui_Exported = ~isempty(gui_State.gui_LayoutFcn);
    % this application data is used to indicate the running mode of a GUIDE
    % GUI to distinguish it from the design mode of the GUI in GUIDE. it is
    % only used by actxproxy at this time.
    setappdata(0,genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]),1);
    if gui_Exported
        gui_hFigure = feval(gui_State.gui_LayoutFcn, gui_SingletonOpt);
        
        % make figure invisible here so that the visibility of figure is
        % consistent in OpeningFcn in the exported GUI case
        if isempty(gui_VisibleInput)
            gui_VisibleInput = get(gui_hFigure,'Visible');
        end
        set(gui_hFigure,'Visible','off')
        
        % openfig (called by local_openfig below) does this for guis without
        % the LayoutFcn. Be sure to do it here so guis show up on screen.
        movegui(gui_hFigure,'onscreen');
    else
        gui_hFigure = local_openfig(gui_State.gui_Name, gui_SingletonOpt, gui_Visible);
        % If the figure has InGUIInitialization it was not completely created
        % on the last pass.  Delete this handle and try again.
        if isappdata(gui_hFigure, 'InGUIInitialization')
            delete(gui_hFigure);
            gui_hFigure = local_openfig(gui_State.gui_Name, gui_SingletonOpt, gui_Visible);
        end
    end
    if isappdata(0, genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]))
        rmappdata(0,genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]));
    end
    
    % Set flag to indicate starting GUI initialization
    setappdata(gui_hFigure,'InGUIInitialization',1);
    
    % Fetch GUIDE Application options
    gui_Options = getappdata(gui_hFigure,'GUIDEOptions');
    % Singleton setting in the GUI M-file takes priority if different
    gui_Options.singleton = gui_State.gui_Singleton;
    
    if ~isappdata(gui_hFigure,'GUIOnScreen')
        % Adjust background color
        if gui_Options.syscolorfig
            set(gui_hFigure,'Color', get(0,'DefaultUicontrolBackgroundColor'));
        end
        
        % Generate HANDLES structure and store with GUIDATA. If there is
        % user set GUI data already, keep that also.
        data = guidata(gui_hFigure);
        handles = guihandles(gui_hFigure);
        if ~isempty(handles)
            if isempty(data)
                data = handles;
            else
                names = fieldnames(handles);
                for k=1:length(names)
                    data.(char(names(k)))=handles.(char(names(k)));
                end
            end
        end
        guidata(gui_hFigure, data);
    end
    
    % Apply input P/V pairs other than 'visible'
    for index=1:2:length(varargin)
        if length(varargin) == index || ~ischar(varargin{index})
            break;
        end
        
        len1 = min(length('visible'),length(varargin{index}));
        if ~strncmpi(varargin{index},'visible',len1)
            try set(gui_hFigure, varargin{index}, varargin{index+1}), catch break, end
        end
    end
    
    % If handle visibility is set to 'callback', turn it on until finished
    % with OpeningFcn
    gui_HandleVisibility = get(gui_hFigure,'HandleVisibility');
    if strcmp(gui_HandleVisibility, 'callback')
        set(gui_hFigure,'HandleVisibility', 'on');
    end
    
    feval(gui_State.gui_OpeningFcn, gui_hFigure, [], guidata(gui_hFigure), varargin{:});
    
    if isscalar(gui_hFigure) && ishghandle(gui_hFigure)
        % Handle the default callbacks of predefined toolbar tools in this
        % GUI, if any
        guidemfile('restoreToolbarToolPredefinedCallback',gui_hFigure);
        
        % Update handle visibility
        set(gui_hFigure,'HandleVisibility', gui_HandleVisibility);
        
        % Call openfig again to pick up the saved visibility or apply the
        % one passed in from the P/V pairs
        if ~gui_Exported
            gui_hFigure = local_openfig(gui_State.gui_Name, 'reuse',gui_Visible);
        elseif ~isempty(gui_VisibleInput)
            set(gui_hFigure,'Visible',gui_VisibleInput);
        end
        if strcmpi(get(gui_hFigure, 'Visible'), 'on')
            figure(gui_hFigure);
            
            if gui_Options.singleton
                setappdata(gui_hFigure,'GUIOnScreen', 1);
            end
        end
        
        % Done with GUI initialization
        if isappdata(gui_hFigure,'InGUIInitialization')
            rmappdata(gui_hFigure,'InGUIInitialization');
        end
        
        % If handle visibility is set to 'callback', turn it on until
        % finished with OutputFcn
        gui_HandleVisibility = get(gui_hFigure,'HandleVisibility');
        if strcmp(gui_HandleVisibility, 'callback')
            set(gui_hFigure,'HandleVisibility', 'on');
        end
        gui_Handles = guidata(gui_hFigure);
    else
        gui_Handles = [];
    end
    
    if nargout
        [varargout{1:nargout}] = feval(gui_State.gui_OutputFcn, gui_hFigure, [], gui_Handles);
    else
        feval(gui_State.gui_OutputFcn, gui_hFigure, [], gui_Handles);
    end
    
    if isscalar(gui_hFigure) && ishghandle(gui_hFigure)
        set(gui_hFigure,'HandleVisibility', gui_HandleVisibility);
    end
end

function gui_hFigure = local_openfig(name, singleton, visible)

if nargin('openfig') == 2
    % OPENFIG did not accept 3rd input argument until R13,
    % toggle default figure visible to prevent the figure from showing up too soon.
    gui_OldDefaultVisible = get(0,'defaultFigureVisible');
    set(0,'defaultFigureVisible','off');
    gui_hFigure = matlab.hg.internal.openfigLegacy(name, singleton);
    set(0,'defaultFigureVisible',gui_OldDefaultVisible);
else
    % Call version of openfig that accepts 'auto' option
    gui_hFigure = matlab.hg.internal.openfigLegacy(name, singleton, visible);
end

function result = local_isInvokeActiveXCallback(~, varargin)

try
    result = ispc && iscom(varargin{1}) ...
        && isequal(varargin{1},gcbo);
catch
    result = false;
end

function result = local_isInvokeHGCallback(gui_State, varargin)

try
    fhandle = functions(gui_State.gui_Callback);
    result = ~isempty(findstr(gui_State.gui_Name,fhandle.file)) || ...
        (ischar(varargin{1}) ...
        && isequal(ishghandle(varargin{2}), 1) ...
        && (~isempty(strfind(varargin{1},[get(varargin{2}, 'Tag'), '_'])) || ...
        ~isempty(strfind(varargin{1}, '_CreateFcn'))) );
catch
    result = false;
end

% --- Creates and returns a handle to the GUI figure and sets most of uicontrols. ---
function h1 = RISV_LayoutFcn(policy)
% policy - Create a new figure or use a singleton. 'new' or 'reuse'.

persistent hsingleton;
if strcmpi(policy, 'reuse') & ishandle(hsingleton)
    h1 = hsingleton;
    return;
end

appdata = [];
appdata.GUIDEOptions = struct(...
    'active_h', [], ...
    'taginfo', struct(...
    'figure', 2, ...
    'text', 31, ...
    'pushbutton', 13, ...
    'edit', 19, ...
    'uibuttongroup', 12, ...
    'checkbox', 10), ...
    'override', 0, ...
    'release', [], ...
    'resize', 'none', ...
    'accessibility', 'callback', ...
    'mfile', 1, ...
    'callbacks', 1, ...
    'singleton', 1, ...
    'syscolorfig', 1, ...
    'blocking', 0, ...
    'lastSavedFile', '/Users/Gabriel/Downloads/RISV.m', ...
    'lastFilename', '/Users/Gabriel/Documents/MATLAB/FunctionsRISV/RISV.fig');
appdata.lastValidTag = 'figure1';
appdata.GUIDELayoutEditor = [];
appdata.initTags = struct(...
    'handle', [], ...
    'tag', 'figure1');

h1 = figure(...
    'Units',get(0,'defaultfigureUnits'),...
    'Position',[815 96 1100 600],...
    'Visible',get(0,'defaultfigureVisible'),...
    'Color',get(0,'defaultfigureColor'),...
    'CloseRequestFcn',get(0,'defaultfigureCloseRequestFcn'),...
    'IntegerHandle','off',...
    'MenuBar','none',...
    'Name','RISV',...
    'NumberTitle','off',...
    'Resize','off',...
    'PaperPosition',get(0,'defaultfigurePaperPosition'),...
    'ScreenPixelsPerInchMode','manual',...
    'ChildrenMode','manual',...
    'ParentMode','manual',...
    'HandleVisibility','callback',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'Tag','figure1');

appdata = [];
appdata.lastValidTag = 'text2';

h2 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','A Video impairment simulator according with ITU-T Recommendation P.930',...
    'Style','togglebutton',...
    'Position',[30.6666666666667 26.7692307692308 127.5 3.92307692307692],...
    'BackgroundColor',[1 1 1],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text2',...
    'FontSize',22);

appdata = [];
appdata.lastValidTag = 'text1';

h3 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','RISV',...
    'Style','text',...
    'Position',[61.8333333333333 34.4615384615385 57.8333333333333 3.92307692307692],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'Tag','text1',...
    'FontSize',25);

appdata = [];
appdata.lastValidTag = 'pushbutton1';

h4 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Initialize',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[950 50 101 30],...
    'Callback',@(hObject,eventdata)RISV('pushbutton1_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'Tag','pushbutton1',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'pushbutton2';

h5 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Browse',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[51 500 101 41],...
    'Callback',@(hObject,eventdata)RISV('pushbutton2_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton2',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'pushbutton3';

h6 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Save',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[51 401 101 41],...
    'Callback',@(hObject,eventdata)RISV('pushbutton3_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton3',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'edit1';

h7 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[33.3333333333333 39.3076923076923 75.1666666666667 1.69230769230769],...
    'Callback',@(hObject,eventdata)RISV('edit1_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit1',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'edit2';

h8 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[33.3333333333333 31.4615384615385 75.1666666666667 1.69230769230769],...
    'Callback',@(hObject,eventdata)RISV('edit2_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit2',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'uibuttongroup1';

h9 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','characters',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Impairments',...
    'Position',[8.33333333333333 3.76923076923077 100.166666666667 23.1538461538462],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup1',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox1';

h10 = uicontrol(...
    'Parent',h9,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Artificial Noise',...
    'Style','checkbox',...
    'Position',[4.66666666666667 18.2307692307692 21.8333333333333 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox1_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox1',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox2';

h11 = uicontrol(...
    'Parent',h9,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Blockiness',...
    'Style','checkbox',...
    'Position',[4.66666666666667 14.2307692307692 21.8333333333333 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox2_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox2',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox3';

h12 = uicontrol(...
    'Parent',h9,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Blurring',...
    'Style','checkbox',...
    'Position',[4.66666666666667 10.2307692307692 21.8333333333333 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox3_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox3',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox4';

h13 = uicontrol(...
    'Parent',h9,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Edge Busyness',...
    'Style','checkbox',...
    'Position',[4.66666666666667 6.23076923076923 21.8333333333333 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox4_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox4',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox5';

h14 = uicontrol(...
    'Parent',h9,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Jerkiness',...
    'Style','checkbox',...
    'Position',[4.66666666666667 2.07692307692308 21.8333333333333 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox5_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox5',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'uibuttongroup4';

h15 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','pixels',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Blurring',...
    'Position',[748 318 302 251],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup4',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'checkbox6';

h16 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','ITU P.930',...
    'Style','checkbox',...
    'Position',[4.5 13.9230769230769 16.6666666666667 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox6_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox6',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'checkbox7';

h17 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Moving Average',...
    'Style','checkbox',...
    'Position',[4.5 7.23076923076923 23.5 1.76923076923077],...
    'Callback',@(hObject,eventdata)RISV('checkbox7_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','checkbox7',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text4';

h18 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','6 (Lowest) - 1 (Highest):',...
    'Style','text',...
    'Position',[5.16666666666667 10 26.8333333333333 2.23076923076923],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text4',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit3';

h19 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[35 10.7692307692308 11.6666666666667 1.69230769230769],...
    'Callback',@(hObject,eventdata)RISV('edit3_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit3',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'text5';

h20 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Pixels to average: (1 - Max)',...
    'Style','text',...
    'Position',[10 44 183 29],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text5',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit4';

h21 = uicontrol(...
    'Parent',h15,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[211 51 70 22],...
    'Callback',@(hObject,eventdata)RISV('edit3_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit4',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'uibuttongroup2';

h22 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','characters',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Artificial Noise',...
    'Position',[8.16666666666667 24.3846153846154 50.3333333333333 19.3076923076923],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup2',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'text9';

h23 = uicontrol(...
    'Parent',h22,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Percent of frames to be noisy',...
    'Style','text',...
    'Position',[5 13.9230769230769 38.1666666666667 1.69230769230769],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text9',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text10';

h24 = uicontrol(...
    'Parent',h22,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','0 - 100%:',...
    'Style','text',...
    'Position',[6 10.0769230769231 12.1666666666667 1.69230769230769],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text10',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit8';

h25 = uicontrol(...
    'Parent',h22,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[21.5 10 11.6666666666667 2.15384615384615],...
    'Callback',@(hObject,eventdata)RISV('edit8_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit8',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'uibuttongroup5';

h26 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','pixels',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Edge Busyness',...
    'Position',[50 31 302 251],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup5',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'text11';

h27 = uicontrol(...
    'Parent',h26,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Level of impairment',...
    'Style','text',...
    'Position',[6.33333333333333 12.9230769230769 38.1666666666667 1.69230769230769],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text11',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text12';

h28 = uicontrol(...
    'Parent',h26,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','-1 (Min) - -30 (Max):',...
    'Style','text',...
    'Position',[37 120 135 22],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text12',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit9';

h29 = uicontrol(...
    'Parent',h26,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[180 119 70 28],...
    'Callback',@(hObject,eventdata)RISV('edit9_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit9',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'uibuttongroup6';

h30 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','pixels',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Jerkiness',...
    'Position',[400 31 302 251],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup6',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'text13';

h31 = uicontrol(...
    'Parent',h30,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String','Number of frames to skip',...
    'Style','text',...
    'Position',[6.33333333333333 12.9230769230769 38.1666666666667 1.69230769230769],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text13',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text14';

h32 = uicontrol(...
    'Parent',h30,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','1 - Max:',...
    'Style','text',...
    'Position',[37 120 73 22],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text14',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit10';

h33 = uicontrol(...
    'Parent',h30,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[130 120 70 28],...
    'Callback',@(hObject,eventdata)RISV('edit10_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit10',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'uibuttongroup3';

h34 = uibuttongroup(...
    'Parent',h1,...
    'FontUnits','points',...
    'Units','pixels',...
    'SelectionChangeFcn',blanks(0),...
    'Title','Blockiness',...
    'Position',[400 318 302 251],...
    'ResizeFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','uibuttongroup3',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'text6';

h35 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Size of blocks: 1 (No blockiness) - 30 (big blocks)',...
    'Style','text',...
    'Position',[9 173 230 34],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text6',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit5';

h36 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[239 182 46 28],...
    'Callback',@(hObject,eventdata)RISV('edit5_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit5',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text7';

h37 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',{  'Percent of frames to be blocked:'; ' 0 - 100%' },...
    'Style','text',...
    'Position',[9 122 210 34],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text7',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit6';

h38 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units','characters',...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[39.6666666666667 10.0769230769231 7.66666666666666 2.15384615384615],...
    'Callback',@(hObject,eventdata)RISV('edit6_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit6',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'text8';

h39 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Percent of blocks within a frame: 0 - 100%',...
    'Style','text',...
    'Position',[9 71 210 34],...
    'Children',[],...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','text8',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'edit7';

h40 = uicontrol(...
    'Parent',h34,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String',blanks(0),...
    'Style','edit',...
    'Position',[239 82 46 26],...
    'Callback',@(hObject,eventdata)RISV('edit7_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','edit7',...
    'FontSize',14);

appdata = [];
appdata.lastValidTag = 'pushbutton9';

h41 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Back',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[849 50 101 30],...
    'Callback',@(hObject,eventdata)RISV('pushbutton9_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton9',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'pushbutton4';

h42 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Continue',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[949 50 101 30],...
    'Callback',@(hObject,eventdata)RISV('pushbutton4_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton4',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'pushbutton5';

h43 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Impair',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[950 50 101 30],...
    'Callback',@(hObject,eventdata)RISV('pushbutton5_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton5',...
    'FontSize',15);

appdata = [];
appdata.lastValidTag = 'pushbutton8';

h44 = uicontrol(...
    'Parent',h1,...
    'FontUnits',get(0,'defaultuicontrolFontUnits'),...
    'Units',get(0,'defaultuicontrolUnits'),...
    'String','Finish',...
    'Style',get(0,'defaultuicontrolStyle'),...
    'Position',[951 50 99 30],...
    'Callback',@(hObject,eventdata)RISV('pushbutton8_Callback',hObject,eventdata,guidata(hObject)),...
    'Children',[],...
    'KeyPressFcn',blanks(0),...
    'ParentMode','manual',...
    'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
    'DeleteFcn',blanks(0),...
    'ButtonDownFcn',blanks(0),...
    'Tag','pushbutton8',...
    'FontSize',15);

hsingleton = h1;

% --- Executes just before RISV is made visible. ---
function RISV_OpeningFcn(hObject, ~, handles, varargin)

handles.output = hObject;
handles.display = repmat({''},5,1);
handles.order = 276;
handles.impairmentstype = repmat({''},5,1);
handles.impairmentsname = repmat({0},5,0);
handles.impairments = char.empty(0,5);
% --- UI Components ---
% --- SCR 02 ---
set(handles.pushbutton2, 'Visible', 'off')
set(handles.pushbutton3, 'Visible', 'off')
set(handles.edit1, 'Visible', 'off')
set(handles.edit2, 'Visible', 'off')
set(handles.uibuttongroup1, 'Visible', 'off')
set(handles.pushbutton4, 'Visible', 'off')
% --- SCR 03 ---
set(handles.uibuttongroup2, 'Visible', 'off')
set(handles.uibuttongroup3, 'Visible', 'off')
set(handles.uibuttongroup4, 'Visible', 'off')
set(handles.uibuttongroup5, 'Visible', 'off')
set(handles.uibuttongroup6, 'Visible', 'off')
set(handles.pushbutton9, 'Visible', 'off')
set(handles.pushbutton5, 'Visible', 'off')
% --- SCR 04 ---
set(handles.pushbutton8, 'Visible', 'off')
guidata(hObject, handles);

%% --- Screen 01 ---
% --- Initialize Button ---
function pushbutton1_Callback(~, ~, handles)

% --- SCR 01 ---
set(handles.text1, 'Visible', 'off')
set(handles.text2, 'Visible', 'off')
set(handles.pushbutton1, 'Visible', 'off')
% --- SCR 02 ---
set(handles.pushbutton2, 'Visible', 'on')
set(handles.pushbutton3, 'Visible', 'on')
set(handles.edit1, 'Visible', 'on')
set(handles.edit2, 'Visible', 'on')
set(handles.uibuttongroup1, 'Visible', 'on')
set(handles.pushbutton4, 'Visible', 'on')

%% --- Screen 02 ---
% --- Browse Button ---
function pushbutton2_Callback(hObject, ~, handles)

[filename, browsepath] = uigetfile({'*.avi'}, 'Select Videofile(s)', 'MultiSelect', 'on');
if iscell (filename)
    for i=1:length(filename)
        video_input{i} = [browsepath filename{i}];
        videodata{i} = dir(video_input{i});
    end
else
    video_input{1} = [browsepath filename];
    video_input{1} = num2str(video_input{1});
    videodata{1} = dir(video_input{1});
end
handles.videodata = videodata;
handles.video_input = video_input;
set(handles.edit1,'String', browsepath)
guidata(hObject, handles);

% --- Save Button ---
function pushbutton3_Callback(hObject, ~, handles)

[savepath] = uigetdir;
set(handles.edit2,'String',savepath)
handles.savepath = savepath;
guidata(hObject, handles);

% --- Artificial Noise ---
function checkbox1_Callback(hObject, ~, handles)

impairments = handles.impairments;
order = handles.order;
display = handles.display;
s = 1 + length(impairments);
if get(hObject,'Value') == 1
    impairments(s) = 'N';
    display{s} = uicontrol('Visible', 'on','Style','text','Units','pixels','Position', [390 order 159 24],'FontName','Helvetica','FontSize', 15, 'String', [num2str(s) '.' ' ' 'Artificial Noise']);
    order = order - 50;
else
    s = s - 1;
    order = order + 50;
    impairments(s) = 0;
    set (display{s}, 'Position', [390 order 159 24], 'String', '');
end
handles.display = display;
handles.order = order;
handles.impairments = impairments;
guidata(hObject, handles);

% --- Blockiness ---
function checkbox2_Callback(hObject, ~, handles)

impairments = handles.impairments;
order = handles.order;
display = handles.display;
s = 1 + length(impairments);
if get(hObject,'Value') == 1
    impairments(s) = 'B';
    display{s} = uicontrol('Visible', 'on','Style','text','Units','pixels','Position', [390 order 159 24],'FontName','Helvetica','FontSize', 15, 'String', [num2str(s) '.' ' ' 'Blockiness']);
    order = order - 50;
else
    s = s - 1;
    order = order + 50;
    impairments(s) = 0;
    set (display{s},'Position', [390 order 159 24], 'String', '');
end
handles.display = display;
handles.order = order;
handles.impairments = impairments;
guidata(hObject, handles);

% --- Blurring ---
function checkbox3_Callback(hObject, ~, handles)

impairments = handles.impairments;
order = handles.order;
display = handles.display;
s = 1 + length(impairments);
if get(hObject,'Value') == 1
    impairments(s) = 'b';
    display{s} = uicontrol('Visible', 'on','Style','text','Units','pixels','Position', [390 order 159 24],'FontName','Helvetica','FontSize', 15, 'String', [num2str(s) '.' ' ' 'Blurring']);
    order = order - 50;
else
    s = s - 1;
    order = order + 50;
    impairments(s) = 0;
    set (display{s},'Position', [390 order 159 24], 'String', '');
end
handles.display = display;
handles.order = order;
handles.impairments = impairments;
guidata(hObject, handles);

% --- Edge Busyness ---
function checkbox4_Callback(hObject, ~, handles)

impairments = handles.impairments;
display = handles.display;
order = handles.order;
s = 1 + length(impairments);
if get(hObject,'Value') == 1
    impairments(s) = 'E';
    display{s} = uicontrol('Visible', 'on','Style','text','Units','pixels','Position', [390 order 159 24],'FontName','Helvetica','FontSize', 15, 'String', [num2str(s) '.' ' ' 'Edge Busyness']);
    order = order - 50;
else
    s = s - 1;
    order = order + 50;
    impairments(s) = 0;
    set (display{s},'Position', [390 order 159 24], 'String', '');
end
handles.display = display;
handles.order = order;
handles.impairments = impairments;
guidata(hObject, handles);

% --- Jerkiness ---
function checkbox5_Callback(hObject, ~, handles)

impairments = handles.impairments;
order = handles.order;
display = handles.display;
s = 1 + length(impairments);
if get(hObject,'Value') == 1
    impairments(s) = 'J';
    display{s} = uicontrol('Visible', 'on','Style','text','Units','pixels','Position', [390 order 159 24],'FontName','Helvetica','FontSize', 15, 'String', [num2str(s) '.' ' ' 'Jerkiness']);
    order = order - 50;
else
    s = s - 1;
    order = order + 50;
    impairments(s) = 0;
    set (display{s},'Position', [390 order 159 24], 'String', '');
end
handles.display = display;
handles.order = order;
handles.impairments = impairments;
guidata(hObject, handles);

% --- Continue Button ---
function pushbutton4_Callback(~, ~, handles)
set(handles.pushbutton2, 'Visible', 'off')
set(handles.pushbutton3, 'Visible', 'off')
set(handles.edit1, 'Visible', 'off')
set(handles.edit2, 'Visible', 'off')
set(handles.uibuttongroup1, 'Visible', 'off')
set(handles.pushbutton4, 'Visible', 'off')
% --- Dynamic impairments setup ---
for s = 1: length(handles.impairments)
    set (handles.display{s}, 'Visible', 'off');
end
set(handles.pushbutton5, 'Visible', 'on')
set(handles.pushbutton9, 'Visible', 'on')
x = 50;
y = 318;
for i = 1: length(handles.impairments)
    if x == 1100
        x = 50;
        y = 31;
    end
    switch handles.impairments(i)
        case 'N'
            set(handles.uibuttongroup2, 'Visible', 'on', 'Units', 'pixels', 'Position', [x y 302 251]);
        case 'B'
            set(handles.uibuttongroup3, 'Visible', 'on', 'Units', 'pixels', 'Position', [x y 302 251]);
        case 'b'
            set(handles.uibuttongroup4, 'Visible', 'on', 'Units', 'pixels', 'Position', [x y 302 251]);
        case 'E'
            set(handles.uibuttongroup5, 'Visible', 'on', 'Units', 'pixels', 'Position', [x y 302 251]);
        case 'J'
            set(handles.uibuttongroup6, 'Visible', 'on', 'Units', 'pixels', 'Position', [x y 302 251]);
    end
    x = x + 350;
end

% --- Back Button ---
function pushbutton9_Callback(hObject, ~, handles)

% --- SCR 03 Components ---
set(handles.uibuttongroup2, 'Visible', 'off')
set(handles.uibuttongroup3, 'Visible', 'off')
set(handles.uibuttongroup4, 'Visible', 'off')
set(handles.uibuttongroup5, 'Visible', 'off')
set(handles.uibuttongroup6, 'Visible', 'off')
set(handles.pushbutton5, 'Visible', 'off')
set(handles.pushbutton9, 'Visible', 'off')
set(handles.checkbox1,'Value', 0);
set(handles.checkbox2,'Value', 0);
set(handles.checkbox3,'Value', 0);
set(handles.checkbox4,'Value', 0);
set(handles.checkbox5,'Value', 0);
handles.display = repmat({''},5,1);
handles.order = 276;
handles.impairmentstype = repmat({0},5,1);
handles.impairments = char.empty(0,5);
% --- SCR 02 Components ---
set(handles.pushbutton2, 'Visible', 'on')
set(handles.pushbutton3, 'Visible', 'on')
set(handles.edit1, 'Visible', 'on')
set(handles.edit2, 'Visible', 'on')
set(handles.uibuttongroup1, 'Visible', 'on')
set(handles.pushbutton4, 'Visible', 'on')
guidata(hObject, handles);

%% --- Screen 03 ---
% --- Artificial Noise ---
function edit8_Callback(hObject, ~, handles)

procent_noise = str2double(get(hObject,'String'));
if procent_noise ~=0
    handles.impairmentsname{1} = ['_noiseQ_' num2str(procent_noise)];
end
handles.procent_noise = procent_noise;
guidata(hObject, handles);

% --- Blockiness ---
function edit5_Callback(hObject, ~, handles)

handles.blocki_value = str2double(get(hObject,'String'));
guidata(hObject, handles);

function edit6_Callback(hObject, ~, handles)

handles.blocki_frame_percent = str2double(get(hObject,'String'));
guidata(hObject, handles);

function edit7_Callback(hObject, ~, handles)

block_percent = str2double(get(hObject,'String'));
impairmentsname = handles.impairmentsname;
blocki_value = handles.blocki_value;
blocki_frame_percent = handles.blocki_frame_percent;
if block_percent ~=0
    impairmentsname{2} = ['_blocki_' num2str(blocki_value), '_framesimp_' num2str(blocki_frame_percent), '_blocksimp_' num2str(block_percent)];
end
handles.impairmentsname = impairmentsname;
handles.block_percent = block_percent;
guidata(hObject, handles);

% --- Blurring ---
function checkbox6_Callback(hObject, ~, handles)

if get(hObject,'Value') == 1
    blurrmeth = 'ITU930';
    handles.blurrmeth = blurrmeth;
end
guidata(hObject, handles);

function checkbox7_Callback(hObject, ~, handles)

if get(hObject,'Value') == 1
    blurrmeth = 'MovAve';
    handles.blurrmeth = blurrmeth;
end
guidata(hObject, handles);

function edit3_Callback(hObject, ~, handles)

smooth_val = str2double(get(hObject,'String'));
impairmentsname = handles.impairmentsname;
blurrmeth = handles.blurrmeth;
if smooth_val ~=0
    impairmentsname{3} = ['_blurr_' num2str(smooth_val) num2str(blurrmeth)];
end
handles.smooth_val = smooth_val;
handles.impairmentsname = impairmentsname;
guidata(hObject, handles);

% --- Edge Busyness ---
function edit9_Callback(hObject, ~, handles)

val_res = str2double(get(hObject,'String'));
impairmentsname = handles.impairmentsname;
if val_res ~=0
    impairmentsname{4} = ['_edgeB_' num2str(val_res)];
end
handles.val_res = val_res;
handles.impairmentsname = impairmentsname;
guidata(hObject, handles);

% --- Jerkiness ---
function edit10_Callback(hObject, ~, handles)

holdframe = str2double(get(hObject,'String'));
impairmentsname = handles.impairmentsname;
if holdframe ~=0
    impairmentsname{5} = ['_jerki_' num2str(holdframe)];
end
handles.holdframe = holdframe;
handles.impairmentsname = impairmentsname;
guidata(hObject, handles);

% --- Impair button ---
function pushbutton5_Callback(~, ~, handles)

tic
set(handles.uibuttongroup2, 'Visible', 'off')
set(handles.uibuttongroup3, 'Visible', 'off')
set(handles.uibuttongroup4, 'Visible', 'off')
set(handles.uibuttongroup5, 'Visible', 'off')
set(handles.uibuttongroup6, 'Visible', 'off')
set(handles.pushbutton5, 'Visible', 'off')
set(handles.pushbutton9, 'Visible', 'off')
videodata = handles.videodata;
video_input = handles.video_input;
savepath = handles.savepath;
impairments = handles.impairments;
impairmentsname = handles.impairmentsname;
for i = 1:length(videodata)
    impairmentstype = handles.impairmentstype;
    tmpname = strrep(videodata{i}.name, '.avi','');
    [num_frames, num_rows, num_columns] = readVideoInput(video_input{i});
    display = uicontrol('Visible','on','Style','text','Units','pixels','Position', [150 399 800 101],'FontName','Helvetica','FontSize',25, 'String', ['File processing ',num2str(video_input{i})]);
    for j = 1:length(impairments)
        switch impairments(j)
            case 'N' % Artificial Noise
                procent_noise = handles.procent_noise;
                impairmentstype{j} = impairmentsname{1};
                output_name{i} = [savepath '/' tmpname impairmentstype{1} impairmentstype{2} impairmentstype{3} impairmentstype{4} impairmentstype{5},'.avi'];
                artificalQuantNoise(video_input{i}, output_name{i}, procent_noise, num_frames, num_rows, num_columns);
                delete_name{j} = output_name{i};
                video_input{i} = output_name{i};
            case 'B' % Blockiness
                blocki_value = handles.blocki_value;
                blocki_frame_percent = handles.blocki_frame_percent;
                block_percent = handles.block_percent;
                impairmentstype{j} = impairmentsname{2};
                output_name{i} = [savepath '/' tmpname impairmentstype{1} impairmentstype{2} impairmentstype{3} impairmentstype{4} impairmentstype{5},'.avi'];
                artificalBlockiness(video_input{i}, output_name{i}, num_frames, num_rows, num_columns, blocki_value, blocki_frame_percent, block_percent);
                delete_name{j} = output_name{i};
                video_input{i} = output_name{i};
            case 'b' % Blurring
                blurrmeth = handles.blurrmeth;
                smooth_val = handles.smooth_val;
                impairmentstype{j} = impairmentsname{3};
                output_name{i} = [savepath '/' tmpname impairmentstype{1} impairmentstype{2} impairmentstype{3} impairmentstype{4} impairmentstype{5},'.avi'];
                switch blurrmeth
                    case 'MovAve'
                        Blurring_RowColumnsMovAverage(video_input{i}, output_name{i}, num_frames, num_rows,  num_columns, smooth_val);
                    case 'ITU930'
                        artificalBlurring(video_input{i}, output_name{i}, smooth_val, num_frames, num_rows);
                end
                delete_name{j} = output_name{i};
                video_input{i} = output_name{i};
            case 'E' % Edge Busyness
                val_res = handles.val_res;
                impairmentstype{j} = impairmentsname{4};
                output_name{i} = [savepath '/' tmpname impairmentstype{1} impairmentstype{2} impairmentstype{3} impairmentstype{4} impairmentstype{5},'.avi'];
                artificalEdgeBusyness(video_input{i}, output_name{i}, val_res, num_frames, num_rows, num_columns);
                delete_name{j} = output_name{i};
                video_input{i} = output_name{i};
            case 'J' % Jerkiness
                holdframe = handles.holdframe;
                impairmentstype{j} = impairmentsname{5};
                output_name{i} = [savepath '/' tmpname impairmentstype{1} impairmentstype{2} impairmentstype{3} impairmentstype{4} impairmentstype{5},'.avi'];
                artificalJerkiness(video_input{i}, output_name{i}, num_frames, holdframe);
                delete_name{j} = output_name{i};
                video_input{i} = output_name{i};
        end
        if j>1
            del = j - 1;
            for d = 1:del
                delete (delete_name{d});
            end
        end
    end
end
elapsedtime = toc;

%% --- Screen 04 ---
% --- SCR 04 components ---
set (display, 'String', 'Finished');
uicontrol('Visible','on','Style','text','Units','pixels','Position', [150 274 800 101],'FontName','Helvetica','FontSize',25, 'String', ['Elapsed time: ', num2str(elapsedtime), 's']);
set(handles.pushbutton8, 'Visible', 'on')

% --- Finish Button ---
function pushbutton8_Callback(hObject, eventdata, handles)
clc
close all